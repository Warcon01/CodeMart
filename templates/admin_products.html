<!DOCTYPE html>
<html class="no-js">
<head>
  <meta charset="utf-8">
  <title>Manage Products - Admin - CodeMart</title>
  <link rel="shortcut icon" href="/static/favicon.ico">
  <link rel="stylesheet" href="/static/css/bootstrap.css">
  <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
<div class="container" style="margin-top: 20px;">
  <h2>Manage Products</h2>
  <table class="table table-striped">
    <thead>
    <tr>
      <th>ID</th>
      <th>Name</th>
      <th>Price</th>
      <th>Image URL</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    {{range .Products}}
    <tr id="product-{{.ID}}">
      <td>{{.ID}}</td>
      <td>{{.Name}}</td>
      <td>{{.Price}}â‚¸</td>
      <td>{{.ImageURL}}</td>
      <td>
        <button class="btn btn-danger btn-xs delete-product" data-productid="{{.ID}}">Delete</button>
      </td>
    </tr>
    {{end}}
    </tbody>
  </table>
  <a href="/admin/product/add" class="btn btn-primary">Add New Product</a>
</div>

<script src="/static/js/jquery.min.js"></script>
<script>
  $(document).ready(function(){
    $('.delete-product').click(function(){
      var btn = $(this);
      var productID = btn.data('productid');
      if (confirm("Are you sure you want to delete this product?")) {
        $.post('/admin/product/delete', { product_id: productID }, function(data) {
          if (data.status === "success") {
            $('#product-' + productID).remove();
          } else {
            alert("Failed to delete product.");
          }
        }).fail(function(){
          alert("Failed to delete product.");
        });
      }
    });
  });
</script>
</body>
</html>
